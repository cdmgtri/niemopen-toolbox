import{k as E,j as g,b6 as V,ap as w,b7 as W,b8 as j,l as q,b9 as z,ba as h,bb as B,bc as x,I as F,bd as I,e as S,be as P,aU as U,aV as $,a_ as D}from"./CD8u9ojq.js";function J(e={}){const{inheritAttrs:t=!0}=e,n=w(),u=S({setup(i,{slots:d}){return()=>{n.value=d.default}}}),l=S({inheritAttrs:t,setup(i,{attrs:d,slots:r}){return()=>{var a;n.value;const o=(a=n.value)==null?void 0:a.call(n,{...K(d),$slots:r});return t&&(o==null?void 0:o.length)===1?o[0]:o}}});return W({define:u,reuse:l},[u,l])}function K(e){const t={};for(const n in e)t[P(n)]=e[n];return t}const N=x?window:void 0,M=x?window.navigator:void 0;function k(e){var t;const n=h(e);return(t=n==null?void 0:n.$el)!=null?t:n}function T(...e){let t,n,u,l;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,u,l]=e,t=N):[t,n,u,l]=e,!t)return j;Array.isArray(n)||(n=[n]),Array.isArray(u)||(u=[u]);const i=[],d=()=>{i.forEach(s=>s()),i.length=0},r=(s,f,v,m)=>(s.addEventListener(f,v,m),()=>s.removeEventListener(f,v,m)),a=q(()=>[k(t),h(l)],([s,f])=>{if(d(),!s)return;const v=z(f)?{...f}:f;i.push(...n.flatMap(m=>u.map(y=>r(s,m,y,v))))},{immediate:!0,flush:"post"}),o=()=>{a(),d()};return B(o),o}function G(){const e=g(!1),t=U();return t&&F(()=>{e.value=!0},t),e}function R(e){const t=G();return E(()=>(t.value,!!e()))}function A(e,t={}){const{controls:n=!1,navigator:u=M}=t,l=R(()=>u&&"permissions"in u),i=w(),d=typeof e=="string"?{name:e}:e,r=w(),a=()=>{var s,f;r.value=(f=(s=i.value)==null?void 0:s.state)!=null?f:"prompt"};T(i,"change",a);const o=I(async()=>{if(l.value){if(!i.value)try{i.value=await u.permissions.query(d)}catch{i.value=void 0}finally{a()}if(n)return D(i.value)}});return o(),n?{state:r,isSupported:l,query:o}:r}function Q(e={}){const{navigator:t=M,read:n=!1,source:u,copiedDuring:l=1500,legacy:i=!1}=e,d=R(()=>t&&"clipboard"in t),r=A("clipboard-read"),a=A("clipboard-write"),o=E(()=>d.value||i),s=g(""),f=g(!1),v=V(()=>f.value=!1,l);function m(){d.value&&_(r.value)?t.clipboard.readText().then(c=>{s.value=c}):s.value=O()}o.value&&n&&T(["copy","cut"],m);async function y(c=h(u)){o.value&&c!=null&&(d.value&&_(a.value)?await t.clipboard.writeText(c):L(c),s.value=c,f.value=!0,v.start())}function L(c){const p=document.createElement("textarea");p.value=c??"",p.style.position="absolute",p.style.opacity="0",document.body.appendChild(p),p.select(),document.execCommand("copy"),p.remove()}function O(){var c,p,C;return(C=(p=(c=document==null?void 0:document.getSelection)==null?void 0:c.call(document))==null?void 0:p.toString())!=null?C:""}function _(c){return c==="granted"||c==="prompt"}return{isSupported:o,text:s,copied:f,copy:y}}const b=new Map;function X(e){const t=$();function n(r){var a;const o=b.get(e)||new Set;o.add(r),b.set(e,o);const s=()=>l(r);return(a=t==null?void 0:t.cleanups)==null||a.push(s),s}function u(r){function a(...o){l(a),r(...o)}return n(a)}function l(r){const a=b.get(e);a&&(a.delete(r),a.size||i())}function i(){b.delete(e)}function d(r,a){var o;(o=b.get(e))==null||o.forEach(s=>s(r,a))}return{on:n,once:u,off:l,emit:d,reset:i}}export{X as a,J as c,Q as u};
