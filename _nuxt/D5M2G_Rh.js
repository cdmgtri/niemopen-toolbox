var le=Object.defineProperty;var ie=(e,s,t)=>s in e?le(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var J=(e,s,t)=>ie(e,typeof s!="symbol"?s+"":s,t);import{_ as ue,a as L,b as ce}from"./DnOhiAXk.js";import{_ as se}from"./V5w1dLgF.js";import{e as C,o as y,i as I,w as v,b as $,d as ae,a as g,t as T,M as H,N as de,T as me,a4 as fe,a5 as Q,a6 as F,r as k,a7 as X,a8 as ee,a9 as pe,aa as ve,ab as ye,ac as he,q as f,ad as ge,D as Z,h as m,U as W,y as _e,$ as be,ae as xe,n as we,z as q,c as Y,af as w,l as re,F as Ie,ag as Se,j as $e}from"./B4LEY2OC.js";import{_ as Ce}from"./CcQyslrq.js";import{_ as G}from"./Qy7vSWk7.js";import{A as R}from"./B7lAAY5O.js";import{_ as N}from"./DsPweMlB.js";import{c as Ee}from"./D5YiijYX.js";const ke={class:"whitespace-pre-wrap"},gt=C({__name:"ToolboxCodePanel",props:{code:{},title:{},color:{default:"neutral"}},setup(e){const s={root:`ring ring-inset ring-[var(--ui-${e.color})]/25 mt-[var(--app-vertical-spacer)] p-0 `,header:"p-2 px-8 text-sm font-medium text-[var(--ui-text-muted)]",body:"p-2 px-8 bg-gray-600 text-white",footer:"p-2 px-8 text-sm font-light"};return(t,n)=>{const a=ue,r=se;return y(),I(r,{ui:s,class:"mb-2 -ml-5"},{header:v(()=>[$(a,{title:t.title,text:t.code},null,8,["title","text"])]),footer:v(()=>n[0]||(n[0]=[ae(" Fill out fields in the form below to see a request. ")])),default:v(()=>[g("pre",ke,[g("code",null,T(t.code),1)])]),_:1})}}});function Re(e){return e.validate&&e.__isYupSchema__}function Ne(e){return e.inner!==void 0}function Te(e){return"schema"in e&&typeof e.coercer=="function"&&typeof e.validator=="function"&&typeof e.refiner=="function"}function Ue(e){return e.parse!==void 0}function De(e){return e.validateAsync!==void 0&&e.id!==void 0}function Ke(e){return e.isJoi===!0}function Ae(e){return"_run"in e||typeof e=="function"&&"schema"in e}function ze(e){return"~standard"in e}async function Be(e,s){var n;const t=await s["~standard"].validate({value:e});return t.issues?{errors:((n=t.issues)==null?void 0:n.map(a=>{var r;return{name:((r=a.path)==null?void 0:r.map(i=>typeof i=="object"?i.key:i).join("."))||"",message:a.message}}))||[],result:null}:{errors:null,result:t.value}}async function Pe(e,s){try{return{errors:null,result:await s.validate(e,{abortEarly:!1})}}catch(t){if(Ne(t))return{errors:t.inner.map(a=>({name:a.path??"",message:a.message})),result:null};throw t}}async function je(e,s){const[t,n]=s.validate(e);return t?{errors:t.failures().map(r=>({message:r.message,name:r.path.join(".")})),result:null}:{errors:null,result:n}}async function Ve(e,s){const t=await s.safeParseAsync(e);return t.success===!1?{errors:t.error.issues.map(a=>({name:a.path.join("."),message:a.message})),result:null}:{result:t.data,errors:null}}async function Me(e,s){try{return{errors:null,result:await s.validateAsync(e,{abortEarly:!1})}}catch(t){if(Ke(t))return{errors:t.details.map(a=>({name:a.path.join("."),message:a.message})),result:null};throw t}}async function Fe(e,s){const t=await("_run"in s?s._run({typed:!1,value:e},{}):s(e));return!t.issues||t.issues.length===0?{errors:null,result:"output"in t?t.output:"value"in t?t.value:null}:{errors:t.issues.map(a=>{var r;return{name:((r=a.path)==null?void 0:r.map(i=>i.key).join("."))||"",message:a.message}}),result:null}}function Oe(e,s){if(Ue(s))return Ve(e,s);if(De(s))return Me(e,s);if(Ae(s))return Fe(e,s);if(Re(s))return Pe(e,s);if(Te(s))return je(e,s);if(ze(s))return Be(e,s);throw new Error("Form validation failed: Unsupported form schema")}class O extends Error{constructor(t,n,a){super("Form validation exception");J(this,"formId");J(this,"errors");J(this,"childrens");this.formId=t,this.errors=n,this.childrens=a,Object.setPrototypeOf(this,O.prototype)}}const qe={base:""},Je=de;var te;const We=H({extend:H(qe),...((te=Je.ui)==null?void 0:te.form)||{}}),_t=C({__name:"Form",props:{id:{},schema:{},state:{},validate:{},validateOn:{default(){return["input","blur","change"]}},disabled:{type:Boolean},validateOnInputDelay:{default:300},class:{},onSubmit:{}},emits:["submit","error"],setup(e,{expose:s,emit:t}){const n=e,a=t,r=n.id??me(),i=xe(`form-${r}`),l=fe(Q,void 0);F(Q,i);const o=k(new Map);X(async()=>{i.on(async u=>{var c;u.type==="attach"?o.value.set(u.formId,{validate:u.validate}):u.type==="detach"?o.value.delete(u.formId):(c=n.validateOn)!=null&&c.includes(u.type)&&await h({name:u.name,silent:!0,nested:!1})})}),ee(()=>{i.reset()}),X(async()=>{l&&(await pe(),l.emit({type:"attach",validate:h,formId:r}))}),ee(()=>{l&&l.emit({type:"detach",formId:r})});const d=k([]);F("form-errors",d);const _=k({});F(ve,_);function b(u){return u.map(c=>{var x;return{...c,id:(x=_.value[c.name])==null?void 0:x.id}})}const p=k(null);async function E(){let u=n.validate?await n.validate(n.state)??[]:[];if(n.schema){const{errors:c,result:x}=await Oe(n.state,n.schema);c?u=u.concat(c):p.value=x}return b(u)}async function h(u={silent:!1,nested:!0}){const c=u.name&&!Array.isArray(u.name)?[u.name]:u.name,x=!c&&u.nested?Array.from(o.value.values()).map(({validate:K})=>K().then(()=>{}).catch(z=>{if(!(z instanceof O))throw z;return z})):[];if(c){const K=d.value.filter(B=>!c.some(P=>{var V,M;const j=(M=(V=_.value)==null?void 0:V[P])==null?void 0:M.pattern;return P===B.name||j&&B.name.match(j)})),z=(await E()).filter(B=>c.some(P=>{var V,M;const j=(M=(V=_.value)==null?void 0:V[P])==null?void 0:M.pattern;return P===B.name||j&&B.name.match(j)}));d.value=K.concat(z)}else d.value=await E();const D=(await Promise.all(x)).filter(K=>K);if(d.value.length+D.length>0){if(u.silent)return!1;throw new O(r,d.value,D)}return n.state}const S=k(!1);F(he,ye(S));async function U(u){var x;S.value=!0;const c=u;try{await h({nested:!0}),c.data=n.schema?p.value:n.state,await((x=n.onSubmit)==null?void 0:x.call(n,c))}catch(D){if(!(D instanceof O))throw D;const K={...c,errors:D.errors,childrens:D.childrens};a("error",K)}S.value=!1}const A=f(()=>n.disabled||S.value);return F(ge,f(()=>({disabled:A.value,validateOnInputDelay:n.validateOnInputDelay}))),s({validate:h,errors:d,setErrors(u,c){c?d.value=d.value.filter(x=>x.name!==c).concat(b(u)):d.value=b(u)},async submit(){await U(new Event("submit"))},getErrors(u){return u?d.value.filter(c=>c.name===u):d.value},clear(u){u?d.value=d.value.filter(c=>c.name!==u):d.value=[]},disabled:A}),(u,c)=>(y(),I(be(m(l)?"div":"form"),{id:m(r),class:W(m(We)({class:n.class})),onSubmit:_e(U,["prevent"])},{default:v(()=>[Z(u.$slots,"default")]),_:3},40,["id","class"]))}}),ne=C({__name:"ToolboxIcon",props:{icon:{},color:{},size:{default:5}},setup(e){const s=f(()=>{let t="";return e.color&&(t+=`text-[var(--ui-${e.color})] `),e.size&&(t+=`size-${e.size}`),t});return(t,n)=>{const a=we;return y(),I(a,{name:t.icon,class:W(m(s))},null,8,["name","class"])}}}),Ye=C({__name:"ToolboxBadgeStatus",props:{test:{},status:{},as:{default:"badge"},display:{default:"both"},variant:{default:"subtle"}},setup(e){const s=f(()=>e.test?R.statusColor(e.test.severity):e.status=="passed"?"success":e.status),t=f(()=>e.display=="icon"?"":s.value=="success"?"passed":s.value),n=f(()=>{if(!(e.display=="text"||!s.value))return N[s.value]});return(a,r)=>{const i=G,l=ne;return a.as=="badge"?(y(),I(i,{key:0,icon:m(n),color:m(s),variant:a.variant,class:"mr-2"},{default:v(()=>[ae(T(m(t)),1)]),_:1},8,["icon","color","variant"])):m(n)?(y(),I(l,{key:1,icon:m(n),color:m(s),size:6},null,8,["icon","color"])):q("",!0)}}}),Le={class:"mb-5"},Ze=C({__name:"APIResponseReportNDRTest",props:{row:{},testResults:{default:()=>[]}},setup(e){const s=[{accessorKey:"status",header:"Status",cell({row:t}){return w(Ye,{status:t.original.status,display:"text"})}},{accessorKey:"entityCategory",header:"Category",cell({row:t}){return w(G,{color:"neutral",variant:"subtle"},()=>t.original.entityCategory)}},{accessorKey:"entity",header:"Entity"},{accessorKey:"location",header:"Location"}];return(t,n)=>{const a=Ce,r=L;return y(),Y("div",Le,[$(a,{color:t.row.original.color,variant:"subtle",title:t.row.original.comment,class:"my-1 mb-3 text-wrap"},null,8,["color","title"]),$(r,{data:t.testResults,columns:s,class:"table-ndr-validation-test-results"},null,8,["data"])])}}}),oe=C({__name:"ToolboxButtonRowExpand",props:{row:{}},setup(e){const s=f(()=>e.row.getIsExpanded()?N.down:N.right);function t(){e.row.toggleExpanded()}return(n,a)=>{const r=re;return y(),I(r,{color:"neutral",variant:"ghost",icon:m(s),square:!0,class:"bg-transparent flex-1",onclick:t},null,8,["icon"])}}}),Ge={key:0},He=C({__name:"APIResponseReportNDR",props:{tests:{}},setup(e){const s=f(()=>{let r=e.tests.flatMap(o=>o.results)||[],i="Skipped validation on NIEM utility schema.",l="This warning can be ignored for external standards that are properly handled via NIEM adapter types.";return r.forEach(o=>{o.testId=="validate-ndr"&&(o.entityCategory="xs:schema",o.entity=o.message==i?i:l)}),r}),t=f(()=>{let r=new Set(e.tests.map(l=>l.id)),i=[];return r.forEach(l=>{let o={},d=s.value.filter(b=>b.testId==l),_=d[0];if(o.testId=l,_){let b=R.resultsStatus(d);o.ruleNumber=_.testId.replace("validate-ndr-rule_",""),o.sortNumber=(o.ruleNumber[0]=="1"?"":"0")+o.ruleNumber,o.comment=_.comment,o.message=_.message,o.count=d.length,o.status=b,o.color=R.statusColor(b),o.icon=R.statusIcon(b)}l=="validate-ndr"&&(o.ruleNumber="n/a",o.sortNumber="00-00",o.message="No target namespace found. This attribute is required for NIEM conformant schemas.",o.comment="Check schemas to see if any unintentionally missed validation checks due to lack of a valid NDR conformance target."),i.push(o)}),i.sort((l,o)=>l.sortNumber.localeCompare(o.sortNumber))});function n(r){return s.value.filter(i=>i.testId==r).sort((i,l)=>i.status<l.status?-1:i.status>l.status?1:i.location<l.location?-1:i.location>l.location?1:i.entity<l.entity?-1:i.entity>l.entity?1:0)}const a=[{id:"expand",cell:({row:r})=>w(oe,{row:r})},{accessorKey:"status",header:"Status",cell:({row:r})=>w(ne,{icon:r.original.icon,color:r.original.color})},{accessorKey:"ruleNumber",header:()=>w("div",{class:"text-right"},"Rule"),cell:({row:r})=>w("div",{class:"text-right"},r.original.ruleNumber)},{accessorKey:"message",header:"Message"},{accessorKey:"count",header:"Count",cell:({row:r})=>w("div",{class:"text-right mr-3"},r.original.count)}];return(r,i)=>{const l=Ze,o=L;return r.tests.length>0?(y(),Y("div",Ge,[$(o,{data:m(t),columns:a,class:"table-ndr-validation-test"},{expanded:v(({row:d})=>[$(l,{row:d,"test-results":n(d.original.testId)},null,8,["row","test-results"])]),_:1},8,["data"])])):q("",!0)}}}),Qe={class:"font-light mb-4"},Xe={class:"mb-3"},et={key:0},tt={class:"text-wrap mb-3"},st=C({__name:"APIResponseReportDefault",props:{test:{}},setup(e){const s=G;function t(a,r){let i=a.location.split("/").pop()||"",l=r.location.split("/").pop()||"",o=i.localeCompare(l,void 0,{sensitivity:"base"});return o!=0?o:parseInt(a.line)-parseInt(r.line)}const n=[{id:"expand",cell:({row:a})=>w(oe,{row:a})},{accessorKey:"status",header:"Status",size:100,cell:({row:a})=>{const r={passed:"success",error:"error",warning:"warning"}[a.getValue("status")];return w(s,{variant:"subtle",color:r},()=>a.getValue("status"))}},{accessorKey:"entityCategory",header:"Category",cell({getValue:a}){if(a())return w(s,{color:"neutral",variant:"subtle"},a)},size:150,maxSize:150},{accessorKey:"entity",header:"Entity",cell:({getValue:a})=>w("span",{class:"w-[100px]"},a),size:200,maxSize:200},{accessorKey:"location",header:"File",cell:({row:a})=>{var r;return(r=a.original.location.split("/"))==null?void 0:r.pop()}},{accessorKey:"line",header:"Line",size:75,maxSize:75},{accessorKey:"column",header:"Column",size:75,maxSize:75}];return(a,r)=>{const i=L;return y(),Y(Ie,null,[g("p",Qe,T(a.test.description),1),$(i,{data:a.test.results.sort(t),columns:n,class:"table-generic-validation-results",sticky:""},{expanded:v(({row:l})=>[r[1]||(r[1]=g("h3",null,"Path:",-1)),g("p",Xe,T(l.original.location),1),l.original.status!="passed"?(y(),Y("div",et,[r[0]||(r[0]=g("h3",null,"Details:",-1)),g("p",tt,T(l.original.message),1)])):q("",!0)]),_:1},8,["data"])],64)}}}),at={class:"flex justify-between"},rt="right-0 p-0.5 bg-transparent text-[var(--ui-text-muted)] hover:text-[var(--ui-text)] font-medium text-sm hover:bg-inherit align-sub",nt=C({__name:"ToolboxCard",props:{title:{},icon:{},color:{default:"neutral"},dismissible:{type:Boolean,default:!1}},setup(e){const s=k(""),t=f(()=>`mt-[var(--app-vertical-spacer)] ${s.value}`),n=f(()=>({root:`ring ring-inset ring-[var(--ui-${e.color})]/25 mt-[var(--app-vertical-spacer)] p-0`,header:`p-2 px-8 text-sm font-medium bg-[var(--ui-${e.color})]/10 text-[var(--ui-${e.color})]`,body:"p-2 px-8",footer:"p-2 px-8 text-sm font-light"}));return(a,r)=>{const i=Ee,l=re,o=se;return y(),I(o,{class:W(m(t)),ui:m(n)},{header:v(()=>[g("div",at,[$(i,{title:a.title,icon:a.icon},null,8,["title","icon"]),a.dismissible?(y(),I(l,{key:0,icon:("icons"in a?a.icons:m(N)).close,onClick:r[0]||(r[0]=d=>s.value="hidden"),class:W(rt)},null,8,["icon"])):q("",!0)])]),default:v(()=>[Z(a.$slots,"default")]),footer:v(()=>[Z(a.$slots,"footer")]),_:3},8,["class","ui"])}}}),ot={class:"whitespace-pre-line"},lt={class:"spaced"},it={class:"mr-2"},bt=C({__name:"APIResponsePanel",props:{results:{}},setup(e){const s=k("0"),t=k([]),n=f(()=>e.results.title||e.results.status.toUpperCase()),a=f(()=>N[e.results.status]),r=f(()=>e.results.status=="pending"?"warning":e.results.status),i=f(()=>[{label:e.results.message,icon:N.download}]),l=f(()=>e.results.report?[{summary:"Info",count:e.results.report.info},{summary:"Warnings",count:e.results.report.warnings},{summary:"Errors",count:e.results.report.errors}]:[]),o=f(()=>{var p;return((p=e.results.report)==null?void 0:p.tests)||[]}),d=f(()=>o.value.filter(p=>p.id.startsWith("validate-ndr"))),_=f(()=>o.value.filter(p=>!p.id.startsWith("validate-ndr"))),b=f(()=>{let p=_.value.map(h=>{let S=_.value.filter(A=>A.id==h.id),U=R.testsStatus(S);return{label:h.id,icon:N.checklist,tests:S,status:U,color:R.statusColor(U)}});if(d.value.length>0){let h=R.testsStatus(d.value);p.push({label:"NDR validation report",icon:N.checklist,kind:"ndr",tests:d.value,status:h,color:R.statusColor(h)})}let E=0;return p.forEach(h=>{t.value.push(E.toString()),E++}),p});return(p,E)=>{const h=L,S=ce,U=He,A=st,u=nt;return p.results.request!="unsent"?(y(),I(u,{key:0,title:m(n),icon:m(a),color:m(r),dismissible:!0},Se({_:2},[p.results.report?{name:"default",fn:v(()=>[g("div",lt,[$(S,{modelValue:m(s),"onUpdate:modelValue":E[0]||(E[0]=c=>$e(s)?s.value=c:null),items:m(i)},{body:v(()=>[$(h,{data:m(l),ui:{base:"min-w-80"}},null,8,["data"])]),_:1},8,["modelValue","items"]),$(S,{"default-value":m(t),items:m(b),type:"multiple"},{default:v(({item:c})=>[g("span",it,T(c.label),1)]),body:v(({item:c})=>[c.kind=="ndr"?(y(),I(U,{key:0,tests:c.tests},null,8,["tests"])):(y(),I(A,{key:1,test:c.tests[0]},null,8,["test"]))]),_:1},8,["default-value","items"])])]),key:"1"}:{name:"default",fn:v(()=>[g("span",ot,[g("div",null,T(p.results.message),1)])]),key:"0"},p.results.request=="returned"?{name:"footer",fn:v(()=>[g("p",null,"Request returned in "+T(p.results.time)+" seconds",1)]),key:"2"}:void 0]),1032,["title","icon","color"])):q("",!0)}}});export{bt as _,gt as a,_t as b};
//# sourceMappingURL=D5M2G_Rh.js.map
