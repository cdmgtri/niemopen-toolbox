import{a as q,_ as A}from"./page-header.529b67f0.js";import{a as $,o,b as a,f as e,c as S,j as g,t as f,p as L,k as C,h as D,n as N,m as j,u as G,l as B,w as d,g as R,q as T,e as i,F as x,r as F,i as y}from"./entry.cf2a792b.js";import"./pages.076ab20e.js";const U=t=>(L("data-v-7b5c2f6f"),t=t(),C(),t),V=U(()=>e("hr",null,null,-1)),W={__name:"form-legend",props:{label:{type:String,required:!0},icon:{type:String,required:!1,default:null},ariaLabel:{type:String,required:!1,default:null}},setup(t){return(l,n)=>{const c=q;return o(),a("div",null,[e("legend",null,[t.icon?(o(),S(c,{key:0,icon:"bi bi-"+t.icon,"aria-label":t.ariaLabel},null,8,["icon","aria-label"])):g("",!0),e("span",null,f(t.label),1)]),V])}}},X=$(W,[["__scopeId","data-v-7b5c2f6f"]]),H=["aria-label"],J={__name:"icon-step",props:{step:{type:String,required:!0}},setup(t){return(l,n)=>(o(),a("i",{class:D(`bi bi-${t.step}-circle i-step`),"aria-label":`Step ${t.step}`},null,10,H))}},I={controlId:{type:String,required:!0},label:{type:String,required:!0},step:{type:String,required:!1,default:null},icon:{type:String,required:!1,default:null},ariaLabel:{type:String,required:!1,default:null},note:{type:String,required:!1,default:null}};const K={class:"form-group mb-4"},Q=["for"],Y={__name:"form-group",props:{...I},setup(t){return(l,n)=>{const c=J,p=q;return o(),a("div",K,[e("label",{for:l.controlId,class:"text-niem mb-2"},[l.step?(o(),S(c,{key:0,step:l.step},null,8,["step"])):l.icon?(o(),S(p,N(j({key:1},G(I))),null,16)):g("",!0),e("span",null,f(l.label),1)],8,Q),B(l.$slots,"default",{},void 0,!0)])}}},E=$(Y,[["__scopeId","data-v-0597f2b2"]]),Z=["id","name","multiple","size","required"],ee={key:0,class:"text-muted"},te={__name:"form-group-select",props:{...I,multiple:{type:Boolean,required:!1,default:!1},size:{type:Number,required:!1,default:null},required:{type:Boolean,required:!1,default:!0},note:{type:String,required:!1,default:null}},setup(t){const l=t;return(n,c)=>{const p=E;return o(),S(p,N(R(l)),{default:d(()=>[e("select",{id:n.controlId,class:"form-select",name:n.controlId,multiple:t.multiple,size:t.size,required:t.required},[B(n.$slots,"default")],8,Z),t.note?(o(),a("small",ee,f(t.note),1)):g("",!0)]),_:3},16)}}},le={class:"form-group mb-3"},oe={key:0,for:"formFileInput",class:"form-label"},ne=["multiple","accept"],se={key:1,class:"form-text note"},ae={__name:"form-file-picker",props:{label:{type:String,required:!1,default:null},multiple:{type:Boolean,required:!1,default:!1},accept:{type:String,required:!1,default:"*"},note:{type:String,required:!1,default:null}},setup(t){return(l,n)=>(o(),a("div",le,[t.label?(o(),a("label",oe,f(t.label),1)):g("",!0),e("input",{id:"file",class:"form-control",type:"file",multiple:t.multiple,accept:t.accept},null,8,ne),t.note?(o(),a("small",se,f(t.note),1)):g("",!0)]))}},re="https://tools.niem.gov/api/v2/";class ie{static async transform(l){const n=re+"transforms/models";return await fetch(n,{body:l,method:"post"})}}const u=t=>(L("data-v-91bce356"),t=t(),C(),t),ce=u(()=>e("div",null,[e("p",null,"Steps:"),e("ol",null,[e("li",null,"Select input format of your NIEM model"),e("li",null,"Select output format for the transformation"),e("li",null,"Upload file to transform")]),e("p",null,"Notes:"),e("ul",null,[e("li",null,[y("Note: Hold down the "),e("kbd",null,"Ctrl"),y(" or "),e("kbd",null,"Cmd"),y(" key to select multiple or de-select options")])])],-1)),de=u(()=>e("div",null,[e("ul",null,[e("li",null,"This page makes a POST multipart/form-data request to the NIEM API to transform the user's input file."),e("li",null,"Curl example"),e("code",null," curl -v -F from=cmf -F to=owl -F file=@CrashDriver.cmf.xml https://tools.niem.gov/api/v2/transforms/models "),e("li",null,[y("See "),e("a",{href:"https://tools.niem.gov/api/v2/swagger-ui/index.html#/Transforms/transformModel"},"OpenAPI documentation"),y(" for more about the request.")])]),e("pre",null,"          ")],-1)),ue=u(()=>e("div",null,[e("form")],-1)),me={class:"container-fluid card"},fe={id:"form-transform",action:"javascript:void(0)",enctype:"multipart/form-data",class:"mb-2"},pe={class:"row my-3"},_e={class:"col"},be=u(()=>e("p",null,"Select the input format and file for the transformation.",-1)),he={class:"col"},ye=u(()=>e("p",null,"Select desired output format and run the transformation.",-1)),ge={class:"row my-3"},ve={class:"col"},Se=["value","disabled"],ke={class:"col"},we=["value","disabled"],Ie={class:"row"},qe={class:"col"},$e={class:"col"},xe=u(()=>e("span",null,"Submit",-1)),Fe=u(()=>e("h4",null,"API call failed",-1)),Le=u(()=>e("pre",null,[e("code",{id:"text-warning"})],-1)),Ce={__name:"transforms",setup(t){const l=[{key:"xsd",label:"XML Schemas",disabled:!1,accept:".xsd, .zip"},{key:"cmf",label:"CMF-XML",disabled:!1,accept:".cmf, .cmf.xml"}],n=[{key:"xsd",label:"XML Schemas",disabled:!1},{key:"cmf",label:"CMF-XML",disabled:!1},{key:"json_schema",label:"JSON Schema",disabled:!1},{key:"owl",label:"OWL",disabled:!1}];let c,p;async function M(){event.preventDefault();const _=document.getElementById("form-transform"),v=document.getElementById("btn-submit"),b=new FormData(_,v),s=document.getElementById("file");b.append("file",s.files[0]);const m=await ie.transform(b);if(m.ok){const h=await m.blob(),w=m.headers.get("Content-Disposition").split("=")[1];z(h,w)}else{const h=await m.json();O(h)}}function z(_,v){const b=window.URL.createObjectURL(_),s=document.createElement("a");s.href=b,s.download=v,document.body.appendChild(s),s.click(),s.remove()}function P(){c.style.display="none"}function O(_){p.textContent=JSON.stringify(_,null,2),c.style.display="block"}return T(()=>{c=document.getElementById("div-warning"),p=document.getElementById("text-warning")}),(_,v)=>{const b=A,s=X,m=te,h=ae,k=E,w=q;return o(),a("div",null,[i(b,{id:"transforms"},{user:d(()=>[ce]),developer:d(()=>[de]),preferences:d(()=>[ue]),_:1}),e("div",me,[e("form",fe,[e("div",pe,[e("div",_e,[i(s,{label:"Input",icon:"file-earmark-arrow-up"}),be]),e("div",he,[i(s,{label:"Output",icon:"file-earmark-arrow-down"}),ye])]),e("div",ge,[e("div",ve,[i(m,{"control-id":"from",label:"Select a NIEM model format",multiple:!1,size:l.length},{default:d(()=>[(o(),a(x,null,F(l,r=>e("option",{key:r.key,value:r.key,disabled:r.disabled},f(r.label),9,Se)),64))]),_:1},8,["size"])]),e("div",ke,[i(m,{"control-id":"to",label:"Select NIEM model output formats",multiple:!1,size:n.length},{default:d(()=>[(o(),a(x,null,F(n,r=>e("option",{key:r.key,value:r.key,disabled:r.disabled},f(r.label),9,we)),64))]),_:1},8,["size"])])]),e("div",Ie,[e("div",qe,[i(k,{"control-id":"div-select-input",label:"Select input file"},{default:d(()=>[i(h,{accept:"*",note:"Do not upload sensitive or distribution-restricted files.",multiple:!1})]),_:1})]),e("div",$e,[i(k,{"control-id":"output-run-transformation",label:"Run the transformation"},{default:d(()=>[e("button",{id:"btn-submit",onclick:M,class:"btn btn-niem"},[i(w,{icon:"play-btn"}),xe])]),_:1})])])]),e("div",{id:"div-warning",class:"alert alert-warning alert-dismissible fade show",style:{display:"none"},role:"alert"},[e("button",{type:"button",class:"btn-close",onclick:P,"aria-label":"Close"}),Fe,Le])])])}}},Me=$(Ce,[["__scopeId","data-v-91bce356"]]);export{Me as default};
