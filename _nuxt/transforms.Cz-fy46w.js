import{a as q,_ as O}from"./page-header.Dx-Oszi6.js";import{_ as x,o,c as a,a as e,v as S,s as g,t as f,p as B,e as C,q as D,x as L,y as R,u as j,z as N,w as d,A as G,B as T,b as i,F as $,n as F,d as y}from"./entry.BGBNRaYT.js";import"./pages.ChKw-BlP.js";const U=t=>(B("data-v-7b5c2f6f"),t=t(),C(),t),V=U(()=>e("hr",null,null,-1)),W={__name:"form-legend",props:{label:{type:String,required:!0},icon:{type:String,required:!1,default:null},ariaLabel:{type:String,required:!1,default:null}},setup(t){return(l,n)=>{const c=q;return o(),a("div",null,[e("legend",null,[t.icon?(o(),S(c,{key:0,icon:"bi bi-"+t.icon,"aria-label":t.ariaLabel},null,8,["icon","aria-label"])):g("",!0),e("span",null,f(t.label),1)]),V])}}},X=x(W,[["__scopeId","data-v-7b5c2f6f"]]),H=["aria-label"],J={__name:"icon-step",props:{step:{type:String,required:!0}},setup(t){return(l,n)=>(o(),a("i",{class:D(`bi bi-${t.step}-circle i-step`),"aria-label":`Step ${t.step}`},null,10,H))}},K=J,I={controlId:{type:String,required:!0},label:{type:String,required:!0},step:{type:String,required:!1,default:null},icon:{type:String,required:!1,default:null},ariaLabel:{type:String,required:!1,default:null},note:{type:String,required:!1,default:null}},Q={class:"form-group mb-4"},Y=["for"],Z={__name:"form-group",props:{...I},setup(t){return(l,n)=>{const c=K,p=q;return o(),a("div",Q,[e("label",{for:l.controlId,class:"text-niem mb-2"},[l.step?(o(),S(c,{key:0,step:l.step},null,8,["step"])):l.icon?(o(),S(p,L(R({key:1},j(I))),null,16)):g("",!0),e("span",null,f(l.label),1)],8,Y),N(l.$slots,"default",{},void 0,!0)])}}},z=x(Z,[["__scopeId","data-v-0597f2b2"]]),ee=["id","name","multiple","size","required"],te={key:0,class:"text-muted"},le={__name:"form-group-select",props:{...I,multiple:{type:Boolean,required:!1,default:!1},size:{type:Number,required:!1,default:null},required:{type:Boolean,required:!1,default:!0},note:{type:String,required:!1,default:null}},setup(t){const l=t;return(n,c)=>{const p=z;return o(),S(p,L(G(l)),{default:d(()=>[e("select",{id:n.controlId,class:"form-select",name:n.controlId,multiple:t.multiple,size:t.size,required:t.required},[N(n.$slots,"default")],8,ee),t.note?(o(),a("small",te,f(t.note),1)):g("",!0)]),_:3},16)}}},oe=le,ne={class:"form-group mb-3"},se={key:0,for:"formFileInput",class:"form-label"},ae=["multiple","accept"],re={key:1,class:"form-text note"},ie={__name:"form-file-picker",props:{label:{type:String,required:!1,default:null},multiple:{type:Boolean,required:!1,default:!1},accept:{type:String,required:!1,default:"*"},note:{type:String,required:!1,default:null}},setup(t){return(l,n)=>(o(),a("div",ne,[t.label?(o(),a("label",se,f(t.label),1)):g("",!0),e("input",{id:"file",class:"form-control",type:"file",multiple:t.multiple,accept:t.accept},null,8,ae),t.note?(o(),a("small",re,f(t.note),1)):g("",!0)]))}},ce=ie,de="https://tools.niem.gov/api/v2/";class ue{static async transform(l){const n=de+"transforms/models";return await fetch(n,{body:l,method:"post"})}}const u=t=>(B("data-v-91bce356"),t=t(),C(),t),me=u(()=>e("div",null,[e("p",null,"Steps:"),e("ol",null,[e("li",null,"Select input format of your NIEM model"),e("li",null,"Select output format for the transformation"),e("li",null,"Upload file to transform")]),e("p",null,"Notes:"),e("ul",null,[e("li",null,[y("Note: Hold down the "),e("kbd",null,"Ctrl"),y(" or "),e("kbd",null,"Cmd"),y(" key to select multiple or de-select options")])])],-1)),fe=u(()=>e("div",null,[e("ul",null,[e("li",null,"This page makes a POST multipart/form-data request to the NIEM API to transform the user's input file."),e("li",null,"Curl example"),e("code",null," curl -v -F from=cmf -F to=owl -F file=@CrashDriver.cmf.xml https://tools.niem.gov/api/v2/transforms/models "),e("li",null,[y("See "),e("a",{href:"https://tools.niem.gov/api/v2/swagger-ui/index.html#/Transforms/transformModel"},"OpenAPI documentation"),y(" for more about the request.")])]),e("pre",null,"          ")],-1)),pe=u(()=>e("div",null,[e("form")],-1)),_e={class:"container-fluid card"},be={id:"form-transform",action:"javascript:void(0)",enctype:"multipart/form-data",class:"mb-2"},he={class:"row my-3"},ye={class:"col"},ge=u(()=>e("p",null,"Select the input format and file for the transformation.",-1)),ve={class:"col"},Se=u(()=>e("p",null,"Select desired output format and run the transformation.",-1)),ke={class:"row my-3"},we={class:"col"},Ie=["value","disabled"],qe={class:"col"},xe=["value","disabled"],$e={class:"row"},Fe={class:"col"},Be={class:"col"},Ce=u(()=>e("span",null,"Submit",-1)),Le=u(()=>e("h4",null,"API call failed",-1)),Ne=u(()=>e("pre",null,[e("code",{id:"text-warning"})],-1)),ze={__name:"transforms",setup(t){const l=[{key:"xsd",label:"XML Schemas",disabled:!1,accept:".xsd, .zip"},{key:"cmf",label:"CMF-XML",disabled:!1,accept:".cmf, .cmf.xml"}],n=[{key:"xsd",label:"XML Schemas",disabled:!1},{key:"cmf",label:"CMF-XML",disabled:!1},{key:"json_schema",label:"JSON Schema",disabled:!1},{key:"owl",label:"OWL",disabled:!1}];let c,p;async function E(){event.preventDefault();const _=document.getElementById("form-transform"),v=document.getElementById("btn-submit"),b=new FormData(_,v),s=document.getElementById("file");b.append("file",s.files[0]);const m=await ue.transform(b);if(m.ok){const h=await m.blob(),w=m.headers.get("Content-Disposition").split("=")[1];M(h,w)}else{const h=await m.json();A(h)}}function M(_,v){const b=window.URL.createObjectURL(_),s=document.createElement("a");s.href=b,s.download=v,document.body.appendChild(s),s.click(),s.remove()}function P(){c.style.display="none"}function A(_){p.textContent=JSON.stringify(_,null,2),c.style.display="block"}return T(()=>{c=document.getElementById("div-warning"),p=document.getElementById("text-warning")}),(_,v)=>{const b=O,s=X,m=oe,h=ce,k=z,w=q;return o(),a("div",null,[i(b,{id:"transforms"},{user:d(()=>[me]),developer:d(()=>[fe]),preferences:d(()=>[pe]),_:1}),e("div",_e,[e("form",be,[e("div",he,[e("div",ye,[i(s,{label:"Input",icon:"file-earmark-arrow-up"}),ge]),e("div",ve,[i(s,{label:"Output",icon:"file-earmark-arrow-down"}),Se])]),e("div",ke,[e("div",we,[i(m,{"control-id":"from",label:"Select a NIEM model format",multiple:!1,size:l.length},{default:d(()=>[(o(),a($,null,F(l,r=>e("option",{key:r.key,value:r.key,disabled:r.disabled},f(r.label),9,Ie)),64))]),_:1},8,["size"])]),e("div",qe,[i(m,{"control-id":"to",label:"Select NIEM model output formats",multiple:!1,size:n.length},{default:d(()=>[(o(),a($,null,F(n,r=>e("option",{key:r.key,value:r.key,disabled:r.disabled},f(r.label),9,xe)),64))]),_:1},8,["size"])])]),e("div",$e,[e("div",Fe,[i(k,{"control-id":"div-select-input",label:"Select input file"},{default:d(()=>[i(h,{accept:"*",note:"Do not upload sensitive or distribution-restricted files.",multiple:!1})]),_:1})]),e("div",Be,[i(k,{"control-id":"output-run-transformation",label:"Run the transformation"},{default:d(()=>[e("button",{id:"btn-submit",onclick:E,class:"btn btn-niem"},[i(w,{icon:"play-btn"}),Ce])]),_:1})])])]),e("div",{id:"div-warning",class:"alert alert-warning alert-dismissible fade show",style:{display:"none"},role:"alert"},[e("button",{type:"button",class:"btn-close",onclick:P,"aria-label":"Close"}),Le,Ne])])])}}},Ae=x(ze,[["__scopeId","data-v-91bce356"]]);export{Ae as default};
